(this["webpackJsonp@tile-generator/react-app"]=this["webpackJsonp@tile-generator/react-app"]||[]).push([[0],{101:function(e,t,n){e.exports=n(140)},108:function(e,t,n){},109:function(e,t,n){},11:function(e,t,n){e.exports={top_bar:"styles_top_bar__2cvZD",menu_item_container:"styles_menu_item_container__3Pfan",menu_item:"styles_menu_item__aU3TF",menu_item_selected:"styles_menu_item_selected__3c-dc",bottom_bar:"styles_bottom_bar__2LhUe",intro:"styles_intro__1YFO9",landing_header:"styles_landing_header__1vTWP",contentsContainer:"styles_contentsContainer__3KA02",civ5Instructions:"styles_civ5Instructions__Xbjgx",civ6Instructions:"styles_civ6Instructions__3lJIR",body:"styles_body__193Dj",questionHeader:"styles_questionHeader__gZ1Sk",answerText:"styles_answerText__2LYu2"}},110:function(e,t,n){"use strict";var a=n(70);function r(e,t,n){var a=(t-e)/n;return a=a*n/(n+.5)}function i(e,t,n,r){var i=a(t,2),o=i[0],s=i[1];return e.map((function(e){var t=a(e,2),i=t[0],l=t[1];return[o+i*n,s+l*r]}))}function o(e,n,a){return{type:"Polygon",coordinates:[i(t.offsets,e,n,a)]}}Object.defineProperty(t,"__esModule",{value:!0}),t.createRawHexGrid=function(e){for(var n=e.width,a=e.height,i=e.lon_start,s=e.lon_end,l=e.lat_start,c=e.lat_end,u=r(i,s,n),d=r(c,l,a)/.75,m=l-t.offsets[1][1]*d,h=[],p=0;p<a;p++)for(var f=[(p%2===0?.5*u:0)+i,m-.75*d*p],_=0;_<n;_++){var g=o(f,u,d);h.push(g),f=[f[0]+u,f[1]]}return h},t.calcUnit=r,t.addOffsets=i,t.offsets=[[0,0],[.5,.25],[1,0],[1,-.5],[.5,-.75],[0,-.5],[0,0]],t.mapRiverToLine=function(e,t){var n={northWest:0,northEast:1,east:2,southEast:3,southWest:4,west:5}[t];return{type:"LineString",coordinates:e.coordinates[0].slice(n,n+2)}},t.createHexagon=o},114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){return function(e){return 180*e/Math.PI}(t(function(e){return Math.PI*e/180}(e)))};t.mercatorProject=function(e){return a(e,(function(e){return 2*Math.atan(Math.exp(e))-.5*Math.PI}))},t.inverseMercatorProject=function(e){a(e,(function(e){return Math.log(Math.tan(e)+1/Math.cos(e))}))}},115:function(e,t,n){"use strict";var a=n(72);Object.defineProperty(t,"__esModule",{value:!0});var r=n(58),i=n(58),o=function e(){a(this,e)};t.TileUtils=o,o.isWater=function(e){return e.terrain===i.TerrainType.coast||e.terrain===i.TerrainType.ocean},o.isHilly=function(e){return void 0!==e.elevation&&e.elevation!==i.Elevation.flat},o.isImpassible=function(e){return e.elevation!==i.Elevation.mountain&&e.feature!==r.FeatureType.ice},o.isSettlable=function(e){return!o.isWater(e)&&!o.isImpassible(e)&&e.feature!==r.FeatureType.marsh&&e.feature!==r.FeatureType.oasis}},119:function(e,t,n){"use strict";var a=n(24),r=n(70),i=n(121),o=n(125),s=n(72),l=n(126);Object.defineProperty(t,"__esModule",{value:!0});var c=n(127),u=function(){function e(t,n){var a=this;s(this,e),this.to2D=function(){var e,t=[],n=o(c.range(0,a.height));try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(a.fields.slice(r*a.width,(r+1)*a.width))}}catch(i){n.e(i)}finally{n.f()}return t},this.clone=function(){return new e(a.fields,a.width)},this.cloneWith=function(t){return new e(new Array(a.fields.length).fill(t),a.width)},this.left=function(e,t){return[e,t-1]},this.right=function(e,t){return[e,t+1]},this.topLeft=function(e,t){return[e-1,e%2===0?t:t-1]},this.topRight=function(e,t){return[e-1,e%2===0?t+1:t]},this.bottomLeft=function(e,t){return[e+1,e%2===0?t:t-1]},this.bottomRight=function(e,t){return[e+1,e%2===0?t+1:t]},this.leftValue=function(e,t){return a.getWithBoundsCheck.apply(a,i(a.left(e,t)))},this.rightValue=function(e,t){return a.getWithBoundsCheck.apply(a,i(a.right(e,t)))},this.topLeftValue=function(e,t){return a.getWithBoundsCheck.apply(a,i(a.topLeft(e,t)))},this.topRightValue=function(e,t){return a.getWithBoundsCheck.apply(a,i(a.topRight(e,t)))},this.bottomLeftValue=function(e,t){return a.getWithBoundsCheck.apply(a,i(a.bottomLeft(e,t)))},this.bottomRightValue=function(e,t){return a.getWithBoundsCheck.apply(a,i(a.bottomRight(e,t)))},this.fields=t,this.width=n}return l(e,[{key:"map",value:function(t){return new e(this.fields.map(t),this.width)}},{key:"getIndex",value:function(e,t){return e*this.width+t}},{key:"get",value:function(e,t){return this.fields[this.getIndex(e,t)]}},{key:"getWithBoundsCheck",value:function(e,t){if(this.inBounds(e,t))return this.get(e,t)}},{key:"set",value:function(e,t,n){this.fields[e*this.width+t]=n}},{key:"inBounds",value:function(e,t){return e>=0&&t>=0&&t<this.width&&e<this.height}},{key:"neighborsSquare",value:a.mark((function e(t,n){var i,s,l,u,d,m,h,p,f,_;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[-1,1,1,-1],s=[0,-1,1,1],l=t,u=n,d=o(c.zip(s,i)),e.prev=5,d.s();case 7:if((m=d.n()).done){e.next=15;break}if(h=r(m.value,2),p=h[0],f=h[1],_=[l+=p,u+=f],!this.inBounds.apply(this,_)){e.next=13;break}return e.next=13,_;case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),d.e(e.t0);case 20:return e.prev=20,d.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[5,17,20,23]])}))},{key:"neighbors",value:a.mark((function e(t,n){var r,o,s,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[this.left(t,n),this.topLeft(t,n),this.topRight(t,n),this.right(t,n),this.bottomRight(t,n),this.bottomLeft(t,n)],o=0,s=r;case 2:if(!(o<s.length)){e.next=10;break}if(l=s[o],!this.inBounds.apply(this,i(l))){e.next=7;break}return e.next=7,l;case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e,this)}))},{key:"pairs",value:a.mark((function e(){var t,n,r,i,o=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:[0,0],n=o.length>1&&void 0!==o[1]?o[1]:[this.height,this.width],t=t.map((function(e){return Math.max(0,e)})),n=n.map((function(e){return Math.min(e)})),r=t[0];case 5:if(!(r<n[0])){e.next=16;break}i=t[1];case 7:if(!(i<n[1])){e.next=13;break}return e.next=10,[r,i];case 10:i++,e.next=7;break;case 13:r++,e.next=5;break;case 16:case"end":return e.stop()}}),e,this)}))},{key:"row",value:a.mark((function e(t){var n;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<this.width)){e.next=7;break}return e.next=4,this.get(t,n);case 4:n++,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"rows",value:a.mark((function e(){var t;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.height)){e.next=7;break}return e.next=4,this.row(t);case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"height",get:function(){return this.fields.length/this.width}}]),e}();t.TilesArray=u,u.fromDimensions=function(e,t,n){return new u(Array(e*t).fill(n),e)},u.from2D=function(e){return new u(e.reduce((function(e,t){return[].concat(i(t),i(e))}),[]),e.length>0?e[0].length:0)}},140:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),o=n(30),s=n(26),l=n.n(s),c=n(16),u=n.n(c),d=(n(106),n(7)),m=n.n(d);m.a.AreaSelect=m.a.Class.extend({includes:m.a.Mixin.Events,options:{width:200,height:300,keepAspectRatio:!1},initialize:function(e){m.a.Util.setOptions(this,e),this._width=this.options.width,this._height=this.options.height},addTo:function(e){return this.map=e,this._createElements(),this._render(),this},getBounds:function(){var e=this.map.getSize(),t=new m.a.Point,n=new m.a.Point;n.x=Math.round((e.x-this._width)/2),t.y=Math.round((e.y-this._height)/2),t.x=e.x-n.x,n.y=e.y-t.y;var a=this.map.containerPointToLatLng(n),r=this.map.containerPointToLatLng(t);return new m.a.LatLngBounds(a,r)},remove:function(){this.map.off("moveend",this._onMapChange),this.map.off("zoomend",this._onMapChange),this.map.off("resize",this._onMapResize),this._container.parentNode.removeChild(this._container)},setDimensions:function(e){e&&(this._height=parseInt(e.height)||this._height,this._width=parseInt(e.width)||this._width,this._render(),this.fire("change"))},_createElements:function(){this._container||(this._container=m.a.DomUtil.create("div","leaflet-areaselect-container",this.map._controlContainer),this._topShade=m.a.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._bottomShade=m.a.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._leftShade=m.a.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._rightShade=m.a.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._nwHandle=m.a.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._swHandle=m.a.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._neHandle=m.a.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._seHandle=m.a.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._setUpHandlerEvents(this._nwHandle),this._setUpHandlerEvents(this._neHandle,-1,1),this._setUpHandlerEvents(this._swHandle,1,-1),this._setUpHandlerEvents(this._seHandle,-1,-1),this.map.on("moveend",this._onMapChange,this),this.map.on("zoomend",this._onMapChange,this),this.map.on("resize",this._onMapResize,this),this.fire("change"))},_setUpHandlerEvents:function(e,t,n){t=t||1,n=n||1;var a=this;m.a.DomEvent.addListener(e,"mousedown",(function r(i){i.stopPropagation(),a.map.dragging.disable(),m.a.DomEvent.removeListener(this,"mousedown",r);var o=i.pageX,s=i.pageY,l=a._width/a._height,c=a.map.getSize();function u(e){if(a.options.keepAspectRatio){var r=(a._height>=a._width?c.y:c.y*(1/l))-30;a._height+=2*(s-e.originalEvent.pageY)*n,a._height=Math.max(30,a._height),a._height=Math.min(r,a._height),a._width=a._height*l}else a._width+=2*(o-e.originalEvent.pageX)*t,a._height+=2*(s-e.originalEvent.pageY)*n,a._width=Math.max(30,a._width),a._height=Math.max(30,a._height),a._width=Math.min(c.x-30,a._width),a._height=Math.min(c.y-30,a._height);o=e.originalEvent.pageX,s=e.originalEvent.pageY,a._render()}m.a.DomEvent.addListener(a.map,"mousemove",u),m.a.DomEvent.addListener(a.map,"mouseup",(function t(n){a.map.dragging.enable(),m.a.DomEvent.removeListener(a.map,"mouseup",t),m.a.DomEvent.removeListener(a.map,"mousemove",u),m.a.DomEvent.addListener(e,"mousedown",r),a.fire("change")}))}))},_onMapResize:function(){this._render()},_onMapChange:function(){this.fire("change")},_render:function(){var e=this.map.getSize(),t=Math.round(this._nwHandle.offsetWidth/2),n=Math.round((e.y-this._height)/2),a=Math.round((e.x-this._width)/2);function r(e,t){e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.bottom=t.bottom+"px",e.style.right=t.right+"px"}r(this._topShade,{width:e.x,height:n,top:0,left:0}),r(this._bottomShade,{width:e.x,height:n,bottom:0,left:0}),r(this._leftShade,{width:a,height:e.y-2*n,top:n,left:0}),r(this._rightShade,{width:a,height:e.y-2*n,top:n,right:0}),r(this._nwHandle,{left:a-t,top:n-7}),r(this._neHandle,{right:a-t,top:n-7}),r(this._swHandle,{left:a-t,bottom:n-7}),r(this._seHandle,{right:a-t,bottom:n-7})}}),m.a.areaSelect=function(e){return new m.a.AreaSelect(e)};n(107),n(108),n(109);var h,p=n(4),f=n(44),_=n.n(f),g=n(9),v=function(e,t){return!!e[t]},b=function(e){var t=e.mapData.layers;return _.a.fromPairs(Object.values(g.MapLayers).filter((function(e){return"string"===typeof e})).map((function(e){return[e,v(t,e)]})))},y=function(e){var t=e.leaflet.selectedLayer;return void 0===t?[]:e.mapData.layers[t]||[]},E=function(e){if(void 0===e||void 0===e.properties)return{};var t=function(){switch(e.properties.terrain){case g.TerrainType.coast:return{color:"cyan"};case g.TerrainType.ocean:return{color:"blue"};case g.TerrainType.grass:return{color:"green"};case g.TerrainType.plains:return{color:"gold"};case g.TerrainType.desert:return{color:"sandybrown"};case g.TerrainType.tundra:return{color:"grey"};case g.TerrainType.ice:return{color:"white"};default:return{}}}(),n=function(){switch(e.properties.elevation){case g.Elevation.flat:return e.properties.terrain!==g.TerrainType.coast?{fillColor:"BlanchedAlmond"}:{};case g.Elevation.hills:return{fillColor:"Burlywood",fillOpacity:.75};case g.Elevation.mountain:return{fillColor:"SaddleBrown",fillOpacity:.75}}return{}}(),a=function(){switch(e.properties.feature){case g.FeatureType.forest:return{fillColor:"ForestGreen",fillOpacity:.75};case g.FeatureType.jungle:return{fillColor:"DarkGreen",fillOpacity:.75};case g.FeatureType.marsh:return{fillColor:"LimeGreen",fillOpacity:.75};default:return{}}}(),r=!e.properties.river||_.a.isEqual(e.properties.river,{})?{}:{fillColor:"blue"};return Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)({},n),t),a),r)},w=n(18),x={dimensions:{width:20,height:20},format:"Civ VI",bounds:{_southWest:{lat:37,lng:-121},_northEast:{lat:38,lng:-120}}},C=function(e){return{type:"CHANGE_OPTIONS",payload:Object(p.a)({},e)}},O=n(14),S=n(164),j=function(e,t,n){return m.a.geoJSON({type:"FeatureCollection",features:e.map((function(e,n){return{geometry:e,properties:t[n],type:"Feature"}}))},{style:n})};!function(e){e[e.submitting=0]="submitting",e[e.errored=1]="errored",e[e.done=2]="done",e[e.none=3]="none"}(h||(h={}));var T=function(e,t){var n=Object(a.useState)(t),r=Object(O.a)(n,2),i=r[0],o=r[1],s=Object(a.useState)(),l=Object(O.a)(s,2),c=l[0],u=l[1];return Object(a.useEffect)((function(){void 0!==e&&(c&&e.removeLayer(c),void 0!==i&&i.addTo(e))}),[i,c,e]),Object(a.useCallback)((function(e){o(e),u(i)}),[o,u,i])},L=function(e,t,n){var r=T(e),i="rivers"===t?function(e){return m.a.geoJSON({type:"GeometryCollection",features:e},{style:function(){return{color:"blue",opacity:.5}}})}(n):void 0;Object(a.useEffect)((function(){r(i)}),[i,r])},k=function(e,t,n,r){var i=Object(a.useMemo)((function(){if(e&&t)return j(function(e,t){var n=t.width,a=t.height;return Object(g.createRawHexGrid)({width:n,height:a,lon_start:e.getWest(),lon_end:e.getEast(),lat_start:e.getNorth(),lat_end:e.getSouth()})}(t.getBounds(),r.dimensions),[],(function(){return{opacity:.2,color:"black"}}))}),[e,t,r]),o=T(e,i);Object(a.useEffect)((function(){if(t){var e=function(){n(t.getBounds()),o(i)};return t.on("change",e),function(){return t.off("change",e)}}}),[t,o,n,i]),Object(S.a)((function(){o(i)}),200,[i,r])},N={onBoundsChange:function(e){return{type:"CHANGE_BOUNDS",payload:{bounds:e}}}},M=Object(w.b)((function(e){return{grid:e.mapData.grid,layer:y(e),riverLines:e.mapData.riverLines,selectedLayer:e.leaflet.selectedLayer,settings:e.settings,submissionStatus:e.mapData.submissionStatus}}),N)((function(e){var t=e.onBoundsChange,n=e.settings,i=e.selectedLayer,o=e.riverLines,s=e.grid,l=e.layer,c=e.submissionStatus,u=function(){var e=Object(a.useState)(),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=m.a.map("map").setView([38,-122],4);m.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),setTimeout((function(){e.invalidateSize()}),100),r(e)}),[]),n}(),d=function(e,t,n){var r=Object(a.useState)(),i=Object(O.a)(r,2),o=i[0],s=i[1],l=Object(a.useMemo)((function(){if(e&&n===h.none){var a=m.a.areaSelect({width:300,height:10/10.5*300,keepAspectRatio:!0});return a.addTo(e),t(a.getBounds()),a}}),[e,t,n]);return Object(a.useEffect)((function(){l&&s(l)}),[l]),Object(a.useEffect)((function(){!l&&o&&(o.remove(),s(void 0))}),[o,l]),l}(u,t,c);return k(u,d,t,n),L(u,i,o),function(e,t,n){var r=T(e),i=Object(a.useMemo)((function(){return j(t,n,E)}),[t,n]);Object(a.useEffect)((function(){r(i)}),[r,i])}(u,s,l),r.a.createElement("div",{id:"map"})})),I=n(86),D=n.n(I),B=n(50),R=function(e){return{type:"FINISHED_MAP",payload:{loadingLayer:{index:0,name:void 0},errorMessage:e,submissionStatus:h.errored}}},A=function(e){return{payload:{layer:e.layer},type:"RECEIVE_LAYER"}},z=n(24),F=n.n(z),P=n(46),H=n(87),V=n.n(H),W=function(e){var t=e.mapData,n=t.totalLayers,a=t.submissionStatus,r=t.loadingLayer.index;return a===h.done?1:null!=n&&null!=r?r/n:0},G=function(e,t){var n=new EventSource(e);return n.addEventListener("layer",t),function(){return n.removeEventListener("layer",t)}},U=function(e){return function(t,n){var a=e.rivers,r=n().mapData.grid;a&&t(function(e){return{payload:e,type:"RECEIVE_LINES"}}(a.flatMap((function(e,t){if(!e.river)return[];var n=r[t];return Object.entries(e.river).map((function(e){var t=Object(O.a)(e,2),a=t[0];return t[1]?Object(g.mapRiverToLine)(n,a):null})).filter((function(e){return null!==e}))}))))}},Y=function(e){return function(){var t=Object(P.a)(F.a.mark((function t(n,a){var r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=JSON.parse(e.data),n(A(r)),n(U(r.layer)),console.log(a()),void 0!==(i=a()).mapData.totalLayers&&i.mapData.totalLayers===i.mapData.loadingLayer.index&&n({type:"FINISHED_MAP",payload:{loadingLayer:{index:0,name:void 0},submissionStatus:h.done}});case 5:case"end":return t.stop()}var i}),t)})));return function(e,n){return t.apply(this,arguments)}}()},q={grid:[],layers:{},loadingLayer:{index:0},riverLines:[],submissionStatus:h.none},J=n(39),K=n(166),X=function(e){var t=e.value,n=e.onChange,a=Object(J.a)(e,["value","onChange"]);return r.a.createElement(K.a,Object.assign({value:[t],onChange:function(e){return n(e.value[0])}},a,{overrides:{Root:{style:function(){return{width:"75%",height:"16px"}}},Track:{style:function(){return{paddingTop:"8px",paddingLeft:"1px",paddingRight:"1px",paddingBottom:"5px",marginRight:"0px"}}},TickBar:function(){return null},InnerThumb:function(){return null},ThumbValue:function(){return null},InnerTrack:{style:function(){return{background:"#363636",height:"24px"}}},Thumb:{style:function(){return{height:"18px",width:"16px",display:"flex",alignItems:"center",justifyContent:"center",borderStyle:"solid",borderWidth:"3px",borderColor:"#ccc",backgroundColor:"#fff"}}}}}))},Z=n(160),Q=n(2),$=function(e){var t=e.onChange,n=e.value,a=Object(J.a)(e,["onChange","value"]),i=r.a.useState(""),o=Object(O.a)(i,2),s=o[0],l=o[1],c=r.a.useState(!1),u=Object(O.a)(c,2),d=u[0],m=u[1],h=parseInt(s),p=h>=10&&h<=120;return r.a.createElement(Z.a,Object.assign({endEnhancer:"tiles",onChange:function(e){l(e.target.value.slice(0,3))},onBlur:function(){if(m(!1),l(""),p)t(h);else if(!Number.isNaN(h)){var e=Object(f.clamp)(h,10,120);t(e)}},onFocus:function(){return m(!0)},size:Q.d.mini,error:!p,value:d?s:n},a,{overrides:{Root:{style:function(){return{width:"15%",height:"24px",marginRight:"20px",marginLeft:"20px",marginTop:"8px",background:"#363636"}}},EndEnhancer:{style:function(){return{fontFamily:"Avenir",fontSize:"12px",backgroundColor:"#363636",color:"#ebebeb"}}},Input:{style:function(){return{fontFamily:"Avenir",fontSize:"12px",backgroundColor:"#363636",color:"#ebebeb"}}},InputContainer:{style:function(){return{borderColor:"#363636"}}}}}))},ee=n(159),te={changeOptions:C},ne={"Civ V":"Civilization V","Civ VI":"Civilization VI"},ae=g.gameStrings.map((function(e){return{id:e,label:ne[e]}})),re=Object(w.b)((function(e){return{format:e.settings.format}}),te)((function(e){var t=e.format,n=e.changeOptions;return r.a.createElement(ee.a,{clearable:!1,size:Q.d.mini,value:[{id:t}],options:ae,searchable:!1,onChange:function(e){return n({format:e.value[0].id})},overrides:{Popover:{props:{overrides:{Body:{style:function(){return{zIndex:200}}}}}},Root:{style:function(){return{width:"100%",height:"10px",marginTop:"10px",marginLeft:"6.19px",marginRight:"111.25px",padding:"0px",background:"#363636",borderRadius:"2px"}}},ValueContainer:{style:function(){return{paddingLeft:"10px",background:"#363636",color:"#ebebeb"}}},ControlContainer:{style:function(){return{borderRadius:"2px",border:"none"}}},IconsContainer:{style:function(){return{background:"#363636",borderColor:"#363636",border:"0px"}}},SelectArrow:{style:function(){return{color:"#ebebeb"}}},DropdownContainer:{style:function(){return{backgroundColor:"#363636"}}},SearchIconContainer:{style:function(){return{borderRadius:"2px"}}},Dropdown:{style:function(){return{backgroundColor:"#363636",paddingBottom:"0px",paddingTop:"0px"}}},DropdownListItem:{style:function(){return{backgroundColor:"#363636",paddingBottom:"4px",paddingTop:"4px"}}},OptionContent:{style:function(){return{color:"#ebebeb",fontFamily:"Avenir",fontSize:"12px"}}}}})})),ie=n(90),oe=n.n(ie),se=function(e){var t=e.children;return r.a.createElement("div",{className:oe.a.btn_container},t)},le=se,ce=n(42),ue=n.n(ce),de=n(62),me=n.n(de),he=function(e){var t=e.primary,n=e.children,a=Object(J.a)(e,["primary","children"]);return r.a.createElement("button",Object.assign({className:t?me.a.primary_button:me.a.button},a),n)},pe={min:10,max:120},fe={onChange:C,onSubmit:function(){return function(e,t){e({type:"SUBMITTING",payload:{errorMessage:void 0,submissionStatus:h.submitting}});var n=t().settings;return fetch("".concat("http://localhost:8080","/api/map"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return e(function(e){return function(){var t=Object(P.a)(F.a.mark((function t(n){var a,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:a=t.sent,r=G("".concat("http://localhost:8080","/updates/").concat(a.id),(function(e){return n(Y(e))})),n({type:"RECEIVE_GRID",payload:{grid:a.grid,totalLayers:a.nLayers,layers:{},mapId:a.id,removeSSEListener:r}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),(function(t){return e(R(t))}))}},resetOptions:function(){return{type:"CHANGE_OPTIONS",payload:{format:x.format,dimensions:x.dimensions}}}},_e=function(e){var t=e.selectedOptions,n=e.min,a=e.max,i=e.title,o=e.field,s=e.onChange,l={value:t.dimensions[o],min:n,max:a,onChange:function(e){return s(Object(p.a)(Object(p.a)({},t),{},{dimensions:Object(p.a)(Object(p.a)({},t.dimensions),{},Object(B.a)({},o,e))}))}};return r.a.createElement("div",{className:ue.a.horizontal_containers},r.a.createElement("div",{className:ue.a.left_headers},i),r.a.createElement(X,l),r.a.createElement($,l))},ge=Object(w.b)((function(e){return{selectedOptions:{format:e.settings.format,dimensions:e.settings.dimensions}}}),fe)((function(e){var t=e.onChange,n=e.onSubmit,a=e.selectedOptions,i=e.resetOptions;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ue.a.header},"MAP OPTIONS"),["width","height"].map((function(e){return r.a.createElement(_e,Object.assign({selectedOptions:a,onChange:t,title:e,field:e,key:e},pe))})),r.a.createElement("div",{className:ue.a.horizontal_containers},r.a.createElement("div",{className:ue.a.left_headers},"Format"),r.a.createElement(re,null)),r.a.createElement(se,null,r.a.createElement(he,{primary:!0,onClick:n},"Generate"),r.a.createElement(he,{onClick:i},"Reset")))})),ve=n(165),be=n(49),ye=n.n(be),Ee={selectedLayer:void 0},we={onLayerSelect:function(e){return{type:"SELECT_LAYER",payload:{layerName:e}}},downloadMap:function(){return function(){var e=Object(P.a)(F.a.mark((function e(t,n){var a,r,i,o,s,l;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().mapData.mapId,e.next=3,fetch("".concat("http://localhost:8080","/api/map/").concat(a));case 3:if(404!==(r=e.sent).status){e.next=8;break}t(R("Map file '".concat(a,"' does not exist"))),e.next=13;break;case 8:return s=(null===(i=r.headers)||void 0===i||null===(o=i.get("Content-Disposition"))||void 0===o?void 0:o.split("filename=")[1])||"generated-map.Civ6Map",e.next=11,r.blob();case 11:l=e.sent,V()(l,s);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},resetMap:function(){return{type:"RESET_MAP"}}},xe=Object(w.b)((function(e){return{progress:W(e),selectedLayer:e.leaflet.selectedLayer,receivedLayers:b(e),loadingLayer:e.mapData.loadingLayer.name,submissionStatus:e.mapData.submissionStatus}}),we)((function(e){var t=e.progress,n=e.downloadMap,a=e.receivedLayers,i=e.submissionStatus,o=e.onLayerSelect,s=e.resetMap,l=e.selectedLayer,c=r.a.useState(!1),u=Object(O.a)(c,2),d=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ye.a.header},t<1?"Building map...":"Finished building"),r.a.createElement("div",{className:ye.a.component_array},Object.entries(a).map((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return r.a.createElement("button",{onClick:function(){return o(n)},className:l===n?ye.a.button_selected:ye.a.button,disabled:!a},n)}))),r.a.createElement(ve.a,{value:t,successValue:1,overrides:{BarProgress:{style:function(){return{position:"relative",backgroundcolor:"#4d90e6"}}},Bar:{style:function(e){return{height:e.$theme.sizing.scale300,marginLeft:"30px",marginRight:"30px",backgroundColor:"#363636"}}}}}),r.a.createElement(le,null,r.a.createElement(he,{primary:!d,onClick:function(){m(!0),n()},disabled:d||i!==h.done},"Download"),r.a.createElement(he,{primary:d,onClick:s},"Reset")))})),Ce=Object(w.b)((function(e){return{mapInProgress:e.mapData.submissionStatus===h.submitting||e.mapData.submissionStatus===h.done}}))((function(e){var t=e.mapInProgress;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:D.a.container},t?r.a.createElement(xe,null):r.a.createElement(ge,null)))})),Oe=n(95),Se=n(34),je=n(157),Te=n(141),Le=new Oe.a,ke=function(e){var t=e.children;return r.a.createElement(Se.a,{value:Le},r.a.createElement(je.a,{theme:Te.a},t))},Ne=n(55),Me=n.n(Ne),Ie=n(162),De=n(8),Be=n(161),Re=n(3),Ae=n(163),ze=n(63),Fe=n.n(ze),Pe=function(){return Object(a.useEffect)((function(){var e=r.a.createElement("header",{className:Fe.a.header},"ERROR:"," ",r.a.createElement("div",{className:Fe.a.body},"Not enough land tiles. Map will fail to load in-game.")),t=r.a.createElement(Ae.a,{marginTop:"15px",display:"flex",justifyContent:"center"},r.a.createElement("a",{href:"/Help/#errorQuestion",target:"_blank",style:{textDecoration:"none"}},r.a.createElement(Be.a,{onClick:function(){return Ie.b.clear(n)},size:Re.c.compact,overrides:{BaseButton:{style:function(e){e.$theme;return{borderRadius:"10.5px"}}}}},"More info"))),n=Ie.b.negative(r.a.createElement(r.a.Fragment,null,e,t),{onClose:function(){return console.log("Toast closed.")},overrides:{InnerContainer:{style:{width:"100%"}}}})}),[]),r.a.createElement(Ie.a,{placement:De.b.bottom,overrides:{ToastBody:{style:function(e){return{backgroundColor:e.$theme.colors.toastNegativeBackground,boxShadow:"5px 5px 50px black",borderRadius:"5px"}}}}})},He=function(){return r.a.createElement(ke,null,r.a.createElement("div",{className:Me.a.page},r.a.createElement("div",{className:Me.a.map_container},r.a.createElement(M,null),r.a.createElement(Ce,null)),r.a.createElement("div",{className:Me.a.bottom_bar}),r.a.createElement(Pe,null)))},Ve=n(36),We=n.n(Ve),Ge=function(){return r.a.createElement(ke,null,r.a.createElement("div",{className:We.a.page},r.a.createElement("div",{className:We.a.body},r.a.createElement("div",{className:We.a.intro},r.a.createElement("h1",{className:We.a.landing_header},"Real-world map builder for Civilization"),r.a.createElement("p",{className:We.a.landing_subtitle},"Generate maps for Civilization V and VI using satellite data"),r.a.createElement("div",{className:We.a.btn_container},r.a.createElement(i.b,{to:"/",style:{textDecoration:"none",color:"var(--backgroundGrey)"}},r.a.createElement(he,{primary:!0},"Get started")),r.a.createElement("a",{href:"https://github.com/lolney/tile-generator",style:{textDecoration:"none",color:"var(--backgroundGrey)"}},r.a.createElement(he,null,"Github")))),r.a.createElement("video",{controls:!0},r.a.createElement("source",{src:"About_Video.mp4",type:"video/mp4"})))))},Ue=n(167),Ye=n(158),qe=n(11),Je=n.n(qe),Ke=function(e){var t=e.os,n=e.path;return"Mac"===t?r.a.createElement(r.a.Fragment,null,'To find it in Finder, hold Command-Shift-G to open the "Go to Folder..." menu, then enter:',r.a.createElement("em",null," ",n)):r.a.createElement(r.a.Fragment,null,"To find this folder, open File Explorer and navigate to: ",r.a.createElement("em",null,n))},Xe=n(66),Ze=n.n(Xe),Qe=function(e){var t=e.step,n=e.level;return r.a.isValidElement(t)||"string"===typeof t?r.a.createElement(r.a.Fragment,null,t):r.a.createElement($e,{instruction:t,level:n+1})},$e=function(e){var t=e.instruction,n=t.title,a=t.steps,i=e.hideTitle,o=e.level,s=void 0===o?0:o,l=0===s?"ol":"ul",c=0===s?"h1":"h3";return r.a.createElement(r.a.Fragment,null,!i&&r.a.createElement(c,{className:Ze.a.header},n),r.a.createElement(l,null,a.map((function(e,t){return r.a.createElement("li",{key:t,className:Ze.a.instructionList},r.a.createElement(Qe,{step:e,level:s}))}))))},et=$e,tt={Mac:"~/Library/Application Support/Sid Meier's Civilization 5/Maps",Windows:"Program Files (x86)/Steam/SteamApps/Common/Sid Meier\u2019s Civilization V/Assets/Maps"},nt=function(e,t){return{title:"Civilization V",steps:[{title:"Install your map",steps:["Install by putting the map in the Civ 5 Maps folder",r.a.createElement(Ke,{os:e,path:t})]},{title:"Play your map",steps:['From the main menu, create a game via "Single Player" -> "Set Up\n          Game"','Select "Map Type" -> "Additional Maps"','Select the map with the name of the file you downloaded, by\n          default "TileBuilder"']}]}},at=function(e){var t=e.os,n=e.hideTitle;return r.a.createElement(et,{hideTitle:n,instruction:nt(t,tt[t])})},rt={Mac:"~/Library/Application Support/Sid Meier's CivilizationVI/Saves/WorldBuilder",Windows:"Documents/My Games/Sid Meier's CivilizationVI/Saves/WorldBuilder"},it=function(e,t){return{title:"Civilization VI",steps:[{title:"Install your map",steps:["Install by putting the map in the Civ 6 WorldBuilder folder",r.a.createElement(Ke,{os:e,path:t})]},{title:"Play your map",steps:['Create a game with "Create Game"','In the setup screen, click the map type under "Choose a Map" to open the map selector','Find your map under "Worldbuilder Maps"']}]}},ot=function(e){var t=e.os,n=e.hideTitle;return r.a.createElement(et,{hideTitle:n,instruction:it(t,rt[t])})},st={borderBottomColor:"#4d90e6",fontSize:"18px",fontFamily:"Avenir"},lt=function(){return r.a.createElement(Ue.a,{initialState:{activeKey:"0"},overrides:{TabBar:{style:function(){return{background:"white",width:"170px",marginLeft:"auto",marginRight:"auto"}}},TabContent:{style:function(){return{color:"black",fontSize:"13px",paddingTop:"50px",paddingBottom:"50px"}}}}},r.a.createElement(Ye.a,{title:"MacOS",overrides:{Tab:{style:st}}},r.a.createElement("div",{className:Je.a.contentsContainer},r.a.createElement("div",{className:Je.a.civ5Instructions},r.a.createElement(at,{os:"Mac"})),r.a.createElement("div",{className:Je.a.civ6Instructions},r.a.createElement(ot,{os:"Mac"})))),r.a.createElement(Ye.a,{title:"Windows",overrides:{Tab:{style:st}}},r.a.createElement("div",{className:Je.a.contentsContainer},r.a.createElement("div",{className:Je.a.civ5Instructions},r.a.createElement(at,{os:"Windows"})),r.a.createElement("div",{className:Je.a.civ6Instructions},r.a.createElement(ot,{os:"Windows"})))))},ct=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:Je.a.intro},r.a.createElement("h1",{className:Je.a.landing_header},"FAQ"),r.a.createElement("div",{className:Je.a.body},r.a.createElement("h2",{className:Je.a.questionHeader,id:"errorQuestion"},"What does the error ",r.a.createElement("em",null,'"Not enough land tiles..."')," mean?",r.a.createElement("p",{className:Je.a.answerText},"This means that there are not enough land (non-water) tiles for the game to generate starting positions for all the civilizations. To remedy this, reset and create a new map with more land tiles. Alternatively, you may choose to ignore the error and manually add land tiles to your map in the games's World Builder."," ")),r.a.createElement("h2",{className:Je.a.questionHeader},"Where can I report issues?"),r.a.createElement("p",{className:Je.a.answerText},"You can report issues here:"," ",r.a.createElement("a",{href:"https://github.com/lolney/tile-generator/issues"},"https://github.com/lolney/tile-generator/issues")))))},ut=function(){return r.a.createElement(ke,null,r.a.createElement("div",{className:Je.a.page},r.a.createElement("div",{className:Je.a.body},r.a.createElement("div",{className:Je.a.intro},r.a.createElement("h1",{className:Je.a.landing_header},"Map Installation Instructions"),r.a.createElement(lt,null)),r.a.createElement(ct,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var dt=n(27),mt=n(93),ht=n(94),pt=Object(dt.combineReducers)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"CHANGE_OPTIONS":case"CHANGE_BOUNDS":return Object(p.a)(Object(p.a)({},e),a);default:return e}},leaflet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUBMITTING":return Object(p.a)(Object(p.a)({},e),{},{selectedLayer:void 0});case"SELECT_LAYER":return{selectedLayer:t.payload.layerName};case"RECEIVE_LAYER":if(void 0===e.selectedLayer)return Object(p.a)(Object(p.a)({},e),{},{selectedLayer:Object.keys(t.payload.layer)[0]});default:return e}},mapData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"RECEIVE_LAYER":return Object(p.a)(Object(p.a)({},e),{},{layers:Object(p.a)(Object(p.a)({},e.layers),a.layer),loadingLayer:{index:e.loadingLayer.index+1}});case"RECEIVE_LINES":return Object(p.a)(Object(p.a)({},e),{},{riverLines:a});case"SUBMITTING":return Object(p.a)(Object(p.a)(Object(p.a)({},q),a),{},{submissionStatus:h.submitting});case"FINISHED_MAP":return e.removeSSEListener&&e.removeSSEListener(),Object(p.a)(Object(p.a)(Object(p.a)({},e),a),{},{submissionStatus:h.done,removeSSEListener:void 0});case"RESET_MAP":return e.removeSSEListener&&e.removeSSEListener(),q;default:return Object(p.a)(Object(p.a)({},e),a)}}});l.a.render(r.a.createElement(w.a,{store:Object(dt.createStore)(pt,Object(ht.composeWithDevTools)(Object(dt.applyMiddleware)(mt.a)))},r.a.createElement(i.a,null,r.a.createElement("div",{className:u.a.top_bar},r.a.createElement("div",{className:u.a.header_container},r.a.createElement(i.b,{to:"/",className:u.a.header},r.a.createElement("img",{className:u.a.logo,src:"/logo.svg",alt:"logo"}),r.a.createElement("header",null,"Civilization Tile Builder"))),r.a.createElement("div",{className:u.a.space}),r.a.createElement("div",{className:u.a.menu_item_container},r.a.createElement("div",{className:u.a.button_container},r.a.createElement(i.b,{to:"/About",className:u.a.menu_item,activeClassName:u.a.menu_item_selected},"About")),r.a.createElement("div",{className:u.a.button_container},r.a.createElement(i.b,{to:"/Help",className:u.a.menu_item,activeClassName:u.a.menu_item_selected},"Help")))),r.a.createElement(o.a,{exact:!0,path:"/"},r.a.createElement(He,null)),r.a.createElement(o.a,{path:"/About"},r.a.createElement(Ge,null)),r.a.createElement(o.a,{path:"/Help"},r.a.createElement(ut,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},16:function(e,t,n){e.exports={top_bar:"src_top_bar__2obmK",header_container:"src_header_container__3ZgK1",header:"src_header__yWO2m",logo:"src_logo__nxkEw",menu_item_container:"src_menu_item_container__3EnIT",button_container:"src_button_container__31Yub",menu_item:"src_menu_item__2ELpG",menu_item_selected:"src_menu_item_selected__28qFU"}},36:function(e,t,n){e.exports={top_bar:"styles_top_bar__29i1o",header:"styles_header__1tOdj",menu_item_container:"styles_menu_item_container__1gyIP",menu_item:"styles_menu_item__vlYNi",menu_item_selected:"styles_menu_item_selected__2bVlp",bottom_bar:"styles_bottom_bar__2YYGO",intro:"styles_intro__Di3La",landing_header:"styles_landing_header__2zNlB",landing_subtitle:"styles_landing_subtitle__XOllK",btn_container:"styles_btn_container__FEqZb",button:"styles_button__1IxNs",primary_button:"styles_primary_button__259jz"}},42:function(e,t,n){e.exports={header:"styles_header__V-mc3",horizontal_containers:"styles_horizontal_containers__18MIZ",left_headers:"styles_left_headers__t5rhU"}},49:function(e,t,n){e.exports={container:"styles_container__2jV2Z",header:"styles_header__2ta6H",component_array:"styles_component_array__2AAKj",loading_bar:"styles_loading_bar__3aVIf",button:"styles_button__15NJ4",button_selected:"styles_button_selected__26scX",left_headers:"styles_left_headers__2irQ4"}},55:function(e,t,n){e.exports={top_bar:"styles_top_bar__14x1w",header:"styles_header__2xQxS",menu_item_container:"styles_menu_item_container__1UmuX",menu_item:"styles_menu_item__1g7-2",menu_item_selected:"styles_menu_item_selected__1Em1E",bottom_bar:"styles_bottom_bar__3GJtr",map_container:"styles_map_container__1poyS",page:"styles_page__3RV-B"}},58:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(116));t.gameStrings=["Civ V","Civ VI"],function(e){e[e.climate=0]="climate",e[e.elevation=1]="elevation",e[e.forest=2]="forest",e[e.rivers=3]="rivers",e[e.marsh=4]="marsh"}(t.MapLayers||(t.MapLayers={})),function(e){e[e.grass=0]="grass",e[e.plains=1]="plains",e[e.tundra=2]="tundra",e[e.desert=3]="desert",e[e.ice=4]="ice",e[e.coast=5]="coast",e[e.ocean=6]="ocean"}(t.TerrainType||(t.TerrainType={})),function(e){e[e.ice=0]="ice",e[e.marsh=1]="marsh",e[e.forest=2]="forest",e[e.jungle=3]="jungle",e[e.oasis=4]="oasis",e[e.floodplains=5]="floodplains",e[e.atoll=6]="atoll",e[e.fallout=7]="fallout"}(t.FeatureType||(t.FeatureType={})),function(e){e[e.flat=0]="flat",e[e.hills=1]="hills",e[e.mountain=2]="mountain"}(t.Elevation||(t.Elevation={})),function(e){e[e.Af=0]="Af",e[e.Am=1]="Am",e[e.Aw=2]="Aw",e[e.As=3]="As",e[e.BWh=4]="BWh",e[e.BWk=5]="BWk",e[e.BSh=6]="BSh",e[e.BSk=7]="BSk",e[e.Cfa=8]="Cfa",e[e.Cfb=9]="Cfb",e[e.Cfc=10]="Cfc",e[e.Cwa=11]="Cwa",e[e.Cwb=12]="Cwb",e[e.Cwc=13]="Cwc",e[e.Csa=14]="Csa",e[e.Csb=15]="Csb",e[e.Csc=16]="Csc",e[e.Dfa=17]="Dfa",e[e.Dfb=18]="Dfb",e[e.Dfc=19]="Dfc",e[e.Dfd=20]="Dfd",e[e.Dwa=21]="Dwa",e[e.Dwb=22]="Dwb",e[e.Dwd=23]="Dwd",e[e.Dwc=24]="Dwc",e[e.Dsa=25]="Dsa",e[e.Dsb=26]="Dsb",e[e.Dsc=27]="Dsc",e[e.Dsd=28]="Dsd",e[e.ET=29]="ET",e[e.EF=30]="EF",e[e.Ocean=31]="Ocean"}(t.Koppen||(t.Koppen={}));var i=r.keyof({"Civ V":null,"Civ VI":null}),o=r.type({width:r.number,height:r.number});t.LatLngBoundsT=r.type({_southWest:r.type({lat:r.number,lng:r.number}),_northEast:r.type({lat:r.number,lng:r.number})}),t.MapOptionsT=r.type({dimensions:o,format:i,bounds:t.LatLngBoundsT})},62:function(e,t,n){e.exports={button:"styles_button__3pqej",primary_button:"styles_primary_button__1Uxh2"}},63:function(e,t,n){e.exports={header:"styles_header__2272J",body:"styles_body__I5jwq"}},66:function(e,t,n){e.exports={header:"styles_header__2BjX0",instructionList:"styles_instructionList__95cE7"}},86:function(e,t,n){e.exports={container:"styles_container__yn_aY"}},9:function(e,t,n){"use strict";function a(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),a(n(110)),a(n(114)),a(n(115)),a(n(119)),a(n(58))},90:function(e,t,n){e.exports={btn_container:"styles_btn_container__2lipC"}}},[[101,1,2]]]);
//# sourceMappingURL=main.a1d05e4e.chunk.js.map